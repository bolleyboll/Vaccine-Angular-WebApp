<div class="container">
  <h2 class="text-center my-5">End Trial</h2>
  <form>
    <div class="alert alert-dismissible alert-info my-3" *ngIf="errorFlag">
      <strong>No Patients Are Available In The Trial</strong>
    </div>
    <div class="form-group">
      <label>Select Vaccine</label>
      <div class="dropdown">
        <a
          class="btn btn-secondary btn-block d-flex align-items-center justify-content-between"
          style="background-color: lightgrey"
          type="button"
          id="dropdownMenuButton"
          data-toggle="dropdown"
        >
          {{ vacname }}
          <i class="material-icons"> arrow_drop_down </i>
        </a>
        <div class="dropdown-menu btn-block">
          <a
            *ngFor="let vacc of auth.vaccines"
            class="dropdown-item"
            (click)="vaccName(vacc.name)"
          >
            {{ vacc.name }}
          </a>
        </div>
      </div>
    </div>

    <div class="form-group">
      <label>Select Patient</label>
      <div class="dropdown">
        <a
          class="btn btn-secondary btn-block dropdown-toggle"
          style="background-color: lightgrey"
          type="button"
          id="dropdownMenuButton"
          data-toggle="dropdown"
        >
        </a>
        <div class="dropdown-menu btn-block">
          <a
            *ngFor="let pat of patients"
            class="dropdown-item"
            (click)="patName(pat.name)"
          >
            {{ pat.name }}
          </a>
        </div>
      </div>
    </div>

    <div class="card bg-secondary my-3" *ngIf="successFlag">
      <div class="card-body">
        <div class="d-flex align-items-center justify-content-between">
          <label class="my-0">Name</label>
          <input
            type="text"
            class="form-control ml-4"
            value="{{ patient.name }}"
            disabled
          />
        </div>
        <div class="d-flex align-items-center justify-content-around mt-2">
          <label class="my-0">Gender</label>
          <input
            type="text"
            class="form-control"
            style="margin-left: 15px"
            value="{{ patient.gender }}"
            disabled
          />
        </div>
        <div class="d-flex align-items-center justify-content-around mt-2">
          <label class="my-0">DOB</label>
          <input
            type="text"
            class="form-control"
            style="margin-left: 33px"
            value="{{ patient.dob }}"
            disabled
          />
        </div>
        <div class="d-flex align-items-center justify-content-around mt-2">
          <label class="my-0">Disease</label>
          <input
            type="text"
            class="form-control"
            style="margin-left: 11px"
            value="{{ patient.disease }}"
            disabled
          />
        </div>
      </div>
    </div>
  </form>

  <form (ngSubmit)="endTrial(endtrialform)" #endtrialform="ngForm">
    <div class="form-group">
      <label>Select Result</label>
      <select
        class="form-control st"
        name="result"
        #result="ngModel"
        [(ngModel)]="report.result"
      >
        <option value="Pass">Pass</option>
        <option value="Fail">Fail</option>
      </select>
    </div>
    <div class="form-group">
      <label>Description</label>
      <textarea
        class="form-control"
        rows="3"
        name="description"
        #description="ngModel"
        [(ngModel)]="report.description"
      ></textarea>
    </div>
    <button type="submit" class="btn btn-primary">Submit</button>
  </form>

  <div class="alert alert-success my-3" role="alert" *ngIf="successful">
    <div class="d-flex justify-content-start align-items-center">
      <i class="material-icons md-28 mr-3" style="font-size: 28px">
        check_circle_outline
      </i>
      <h4 class="alert-heading mb-0">Successful</h4>
    </div>
    <hr />
    <p class="mb-0">Trial Ended Successfully</p>
  </div>
  <div class="alert alert-danger my-3" role="alert" *ngIf="unsuccessful">
    <div class="d-flex justify-content-start align-items-center">
      <i class="material-icons md-28 mr-3" style="font-size: 28px">
        highlight_off
      </i>
      <h4 class="alert-heading mb-0">Unsuccessful</h4>
    </div>
    <hr />
    <p class="mb-0">Unable To End The Trial</p>
  </div>
</div>
